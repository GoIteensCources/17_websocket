# Websockets
WebSocket - це протокол зв'язку, який забезпечує двосторонній, постійний зв'язок між клієнтом (наприклад, веб-браузером) та сервером. Він дозволяє відправляти повідомлення між клієнтом та сервером без необхідності повторного встановлення з'єднання для кожного повідомлення, що робить його ідеальним для реалізації веб-додатків, яким потрібна швидка та неперервна комунікація.

## Життєвий Цикл WebSocket-З'єднання
###  1. Ініціалізація (Handshake):
1. З'єднання починається з HTTP-запиту, відомого як "WebSocket Handshake". У цьому запиті клієнт повідомляє серверу, що він хоче "оновити" звичайне HTTP-з'єднання до WebSocket.
2. Якщо сервер підтримує WebSocket, він надсилає відповідь 101 Switching Protocols, після чого з'єднання стає двостороннім WebSocket-каналом.
### 2. Трансфер Даних:
1. Після успішного "handshake" клієнт і сервер можуть обмінюватися повідомленнями у обидва боки. Ці повідомлення можуть бути текстовими або бінарними.
2. WebSocket дозволяє відправляти повідомлення у будь-який момент, без необхідності відкривати нові HTTP-запити.
### 3. Управління З'єднанням:
1. Як клієнт, так і сервер можуть в будь-який момент ініціювати закриття з'єднання.
2. Стандарт WebSocket визначає систему контрольних кодів для управління станами з'єднань, таких як закриття або помилки.
### 4. Закриття З'єднання:
1. Закриття з'єднання ініціюється відправкою повідомлення про закриття від однієї сторони, після чого інша сторона відповідає.
2. Після завершення процесу закриття, з'єднання повністю розривається і не може бути використане для подальшого обміну даними.

```python 
from fastapi import FastAPI, WebSocket

app = FastAPI()

@app.websocket("/ws")
async def websocket_endpoint(websocket: WebSocket):
    await websocket.accept()                                    # Підключення
    try:
        while True:
            data = await websocket.receive_text()               # Очікування на повідомлення від клієнта
            await websocket.send_text(f"Повідомлення: {data}")  # Відповідь сервера
    except Exception as e:
        print(f"Помилка: {e}")
    finally:
        await websocket.close()
```


## Documentation:

[fastapi websocket](https://fastapi.tiangolo.com/advanced/websockets/)
